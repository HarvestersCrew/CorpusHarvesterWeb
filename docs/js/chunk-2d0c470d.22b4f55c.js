(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c470d"],{"3b9a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Bar",[s("div",[s("SelectCard",[s("v-col",{attrs:{cols:"5",lg:"auto"}},[s("v-form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[s("v-text-field",{attrs:{dark:"",outlined:"","hide-details":"",dense:"",label:"Search for...","prepend-icon":"mdi-magnify",clearable:"",disabled:t.disabled},model:{value:t.search_text,callback:function(e){t.search_text=e},expression:"search_text"}})],1)],1),s("v-divider",{attrs:{vertical:"",dark:""}}),s("v-col",{attrs:{cols:"5",lg:"auto"}},[s("v-select",{attrs:{dark:"",outlined:"","hide-details":"",dense:"",label:"Sorting...",items:t.order_items,"prepend-icon":"mdi-sort-alphabetical-variant",disabled:t.disabled},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}})],1)],1),t.$store.state.corpuses.results.length>0?s("v-container",[s("v-row",t._l(t.$store.state.corpuses.results,(function(e,a){return s("v-col",{key:a,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[s("v-card",[s("v-card-title",{staticClass:"mb-2"},[s("v-slide-x-transition",{attrs:{"hide-on-leave":""}},[s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.editing_corpus_name!==e.id,expression:"editing_corpus_name !== corpus.id"}],staticClass:"ml-0",attrs:{dense:"","no-gutters":""}},[s("v-col",[t._v(" "+t._s(e.title)+" ")]),s("v-col",{attrs:{cols:"auto"}},[s("v-btn",{attrs:{disabled:t.disabled,icon:""},on:{click:function(s){return t.open_editing_corpus_name(e.id)}}},[s("v-icon",[t._v("mdi-pencil")])],1)],1)],1)],1),s("v-slide-x-transition",{attrs:{"hide-on-leave":""}},[s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.editing_corpus_name===e.id,expression:"editing_corpus_name === corpus.id"}],attrs:{dense:"","no-gutters":""}},[s("v-col",[s("v-text-field",{attrs:{dense:"",placeholder:e.title,outlined:"","hide-details":"",loading:t.disabled,disabled:t.disabled},model:{value:t.editing_corpus_name_val,callback:function(e){t.editing_corpus_name_val=e},expression:"editing_corpus_name_val"}})],1),s("v-col",{staticClass:"ml-2",attrs:{cols:"auto"}},[s("v-btn",{attrs:{icon:"",disabled:t.disabled},on:{click:t.close_editing_corpus_name}},[s("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1),s("v-btn",{attrs:{icon:"",disabled:t.disabled},on:{click:function(s){return t.send_editing_corpus_name(e.id)}}},[s("v-icon",{attrs:{color:"green"}},[t._v("mdi-check")])],1)],1)],1)],1)],1),s("v-card-subtitle",{staticClass:"pb-0"},[t._v(" #"+t._s(e.id)+" "),s("br"),t._v(" "+t._s(e.creation_date)+" "),s("br"),t._v(" "+t._s(e.files.length)+" file(s) ")]),s("v-card-actions",[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on;return[s("v-btn",t._g({attrs:{icon:"",disabled:t.disabled},on:{click:function(s){return t.open_delete_corpus_modal(e.id)}}},o),[s("v-icon",[t._v("mdi-delete")])],1)]}}],null,!0)},[s("span",[t._v("Delete corpus")])]),s("v-spacer"),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on;return[s("v-btn",t._g({attrs:{icon:"",disabled:t.disabled},on:{click:function(s){t.corpus_dialog_data=e}}},o),[s("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[s("span",[t._v("See more")])])],1)],1)],1)})),1)],1):s("v-container",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10",md:"6"}},[s("v-card",[s("v-card-title",[t._v("Corpus viewer")]),s("v-card-text",[t._v(" Start looking for corpuses by specifying (or not) a text search and an order, and clicking the search button. ")])],1)],1)],1)],1),s("v-btn",{attrs:{loading:t.disabled,fab:"",fixed:"",bottom:"",right:"",color:"blue",dark:"","x-large":""},on:{click:t.search}},[s("v-icon",[t._v("mdi-magnify")])],1)],1),s("v-dialog",{attrs:{"max-width":"500"},model:{value:t.deleting_corpus_modal,callback:function(e){t.deleting_corpus_modal=e},expression:"deleting_corpus_modal"}},[s("v-card",[s("v-card-title",[t._v("Deleting corpus #"+t._s(t.deleting_corpus_val))]),s("v-card-text",{staticClass:"text-left"},[t._v(" You are going to delete corpus #"+t._s(t.deleting_corpus_val)+" from the database. All files in it will be kept. Are you sure? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:"",disabled:t.disabled},on:{click:function(e){t.deleting_corpus_modal=!1}}},[t._v("Cancel")]),s("v-btn",{attrs:{text:"",color:"red",loading:t.disabled},on:{click:t.delete_corpus}},[t._v("Proceed")])],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",persistent:"",transition:"dialog-bottom-transition"},model:{value:t.corpus_dialog,callback:function(e){t.corpus_dialog=e},expression:"corpus_dialog"}},[s("CorpusDetails",{attrs:{corpus:t.corpus_dialog_data}},[s("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.corpus_dialog_data=void 0}}},[s("v-icon",[t._v("mdi-close")])],1)],1)],1)],1)},o=[],i=s("793e"),r=s("e3e5"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"blue"}},[t._t("default"),s("v-toolbar-title",[t._v(t._s(t.corpus.title))])],2),s("v-container",[s("v-row",{staticClass:"my-4",attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"7",lg:"6",xl:"4"}},[s("v-row",[s("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[s("v-card",[s("v-card-title",[t._v("Description")]),s("v-card-text",{staticClass:"px-4"},[s("b",[t._v("ID")]),t._v(" #"+t._s(t.corpus.id)+" "),s("br"),s("b",[t._v("Creation date :")]),t._v(" "+t._s(t.corpus.creation_date)+" "),s("br"),s("b",[t._v("Source(s) :")]),s("br"),s("b",[t._v("Type(s) :")]),s("br")])],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-card-title",[t._v("Corpus size")]),s("v-card-subtitle",[t._v(" Sum of the size of all corpus files (the corpus itself does not take up storage space) ")]),s("v-card-text",{staticClass:"px-4"},[s("div",{staticClass:"display-2"},[t._v(" ~ "+t._s(t.bytes_conversion_string(t.corpus.stats.size))+" ")]),t._v(" ("+t._s(t.corpus.files.length)+" files in total) ")])],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-card-title",[t._v("Files distribution")]),s("v-card-subtitle",[t._v("Files type proportions in this corpus")]),s("v-card-text",[s("DonutChart",{attrs:{"chart-data":t.dataset}})],1)],1)],1)],1)],1),s("v-col",{attrs:{cols:"12",sm:"8",md:"7",lg:"6",xl:"4"}},[s("v-row",[s("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[s("v-card",[s("v-card-title",[t._v("Corpus exportation")]),null!==t.corpus.extraction_path?s("v-card-subtitle",[t._v(" ~ "+t._s(t.bytes_conversion_string(t.corpus.extraction_size))+" ")]):t._e(),s("v-card-text",{staticClass:"text-center"},[null===t.corpus.extraction_path?s("v-btn",{attrs:{dark:"",color:"blue"},on:{click:t.export_corpus}},[t._v(" Export ")]):t._e()],1),null!==t.corpus.extraction_path?s("v-card-actions",[s("v-spacer"),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"","x-large":"",href:t.corpus_dl_url,target:"_blank"}},a),[s("v-icon",[t._v("mdi-download")])],1)]}}],null,!1,403359579)},[s("span",[t._v("Download corpus")])])],1):t._e()],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-card-title",[t._v("Files list")]),s("v-card-text",[t._v(" 10 first files "),s("FilesListing",{attrs:{files:t.corpus.files.slice(0,10),flat:!0}})],1)],1)],1)],1)],1)],1)],1)],1)},l=[],d=s("47d8"),n=s("09c5"),u=s("f10f"),_={name:"CorpusDetails",components:{DonutChart:d["a"],FilesListing:n["a"]},mixins:[u["a"]],props:{corpus:{required:!0,type:Object}},data:function(){return{dataset:{labels:["Images","Texts"],datasets:[{data:[this.corpus.stats.images,this.corpus.stats.texts],backgroundColor:["#77aadd","#ee8866"]}]}}},computed:{corpus_dl_url:function(){return this.$store.getters.full_file_server_url(this.corpus.extraction_path)}},methods:{export_corpus:function(){var t=this,e={id:this.corpus.id};this.$store.commit("add_notification","Exportation started, you will be notified when the archive is ready"),this.$store.dispatch("send_tokenized_request",{type:"export_corpus",data:e,callback:function(e){void 0===e.type||"error"!==e.type||t.$store.commit("add_error_notification","An error occurred while exporting the corpus, please check the logs")}})}}},v=_,p=s("2877"),h=s("6544"),b=s.n(h),m=s("8336"),g=s("b0af"),f=s("99d9"),x=s("62ad"),k=s("a523"),C=s("132d"),w=s("0fd9"),y=s("2fa4"),V=s("71d9"),$=s("2a7f"),D=s("3a2f"),S=Object(p["a"])(v,c,l,!1,null,null,null),T=S.exports;b()(S,{VBtn:m["a"],VCard:g["a"],VCardActions:f["a"],VCardSubtitle:f["b"],VCardText:f["c"],VCardTitle:f["d"],VCol:x["a"],VContainer:k["a"],VIcon:C["a"],VRow:w["a"],VSpacer:y["a"],VToolbar:V["a"],VToolbarTitle:$["a"],VTooltip:D["a"]});var z={name:"Corpus",components:{Bar:i["a"],SelectCard:r["a"],CorpusDetails:T},beforeDestroy:function(){this.$store.state.corpuses.order=this.order,this.$store.state.corpuses.search_text=this.search_text,this.$store.state.corpuses.disabled=this.disabled},data:function(){return{order_items:[{text:"Default",value:"none"},{text:"Name",value:"name_asc"},{text:"Name (desc)",value:"name_desc"},{text:"Date",value:"date_asc"},{text:"Date (desc)",value:"date_desc"}],order:this.$store.state.corpuses.order,search_text:this.$store.state.corpuses.search_text,disabled:this.$store.state.corpuses.disabled,selected_corpus:void 0,editing_corpus_name:void 0,editing_corpus_name_val:void 0,deleting_corpus_modal:!1,deleting_corpus_val:void 0,corpus_dialog_data:void 0}},computed:{corpus_dialog:function(){return void 0!==this.corpus_dialog_data}},methods:{search:function(){this.disabled=!0;var t={order:this.order};""!==this.search_text&&null!==this.search_text&&(t.title=this.search_text),this.$store.dispatch("send_tokenized_request",{type:"get_corpuses",data:t,callback:this.searched})},searched:function(){this.disabled=!1,this.$store.state.corpuses.disabled=this.disabled,this.$store.commit("add_success_notification","Corpuses loaded, go check the corpus tab")},file_icon:function(t){switch(t){case"txt":return"mdi-file-document";case"jpg":case"png":return"mdi-file-image";default:return"mdi-file"}},open_editing_corpus_name:function(t){this.editing_corpus_name=t,this.editing_corpus_name_val=void 0},close_editing_corpus_name:function(){this.editing_corpus_name=void 0},send_editing_corpus_name:function(t){this.disabled=!0;var e={id:t,title:this.editing_corpus_name_val};this.$store.dispatch("send_tokenized_request",{type:"set_corpus_title",data:e,callback:this.callback_editing_corpus_name})},callback_editing_corpus_name:function(t){this.disabled=!1,void 0===t.type||"error"!==t.type?this.close_editing_corpus_name():this.$store.commit("add_error_notification","An error occurred while editing the corpus name, please check the logs")},open_delete_corpus_modal:function(t){this.deleting_corpus_modal=!0,this.deleting_corpus_val=t},delete_corpus:function(){this.disabled=!0;var t={id:this.deleting_corpus_val};this.$store.dispatch("send_tokenized_request",{type:"delete_corpus",data:t,callback:this.callback_delete_corpus})},callback_delete_corpus:function(t){this.disabled=!1,this.deleting_corpus_modal=!1,void 0===t.type||"error"!==t.type||this.$store.commit("add_error_notification","An error occurred while deleting a corpus, please check the logs")}}},A=z,F=s("169a"),j=s("ce7e"),q=s("4bd4"),B=s("b974"),E=s("0789"),I=s("8654"),N=Object(p["a"])(A,a,o,!1,null,null,null);e["default"]=N.exports;b()(N,{VBtn:m["a"],VCard:g["a"],VCardActions:f["a"],VCardSubtitle:f["b"],VCardText:f["c"],VCardTitle:f["d"],VCol:x["a"],VContainer:k["a"],VDialog:F["a"],VDivider:j["a"],VForm:q["a"],VIcon:C["a"],VRow:w["a"],VSelect:B["a"],VSlideXTransition:E["d"],VSpacer:y["a"],VTextField:I["a"],VTooltip:D["a"]})}}]);
//# sourceMappingURL=chunk-2d0c470d.22b4f55c.js.map